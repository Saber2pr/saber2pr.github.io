var version="2026/1/25 13:14:30";(self.webpackChunksaber2pr_github_io=self.webpackChunksaber2pr_github_io||[]).push([[328],{58059:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{MarkdownTextPrimitive:()=>c.MarkdownTextPrimitive,unstable_memoizeMarkdownComponents:()=>p.memoizeMarkdownComponents,useIsMarkdownCodeBlock:()=>l.useIsMarkdownCodeBlock}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(72960),l=r(35144),p=r(34843)},34843:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{areNodesEqual:()=>p,memoCompareNodes:()=>d,memoizeMarkdownComponents:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(33823),p=(e,t)=>{if(!e||!t)return!1;const r=JSON.stringify(e?.properties)===JSON.stringify(t?.properties)&&((e,t)=>"string"==typeof e?e===t:JSON.stringify(e)===JSON.stringify(t))(e?.children,t?.children);return r},d=(e,t)=>p(e.node,t.node),b=(e={})=>Object.fromEntries(Object.entries(e??{}).map((([e,t])=>{if(!t)return[e,t];const r=t;return[e,(0,c.memo)((({node:e,...t})=>(0,l.jsx)(r,{...t})),d)]})))},90153:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{DefaultCodeBlock:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(53558),p=r(33823),d=({node:e,components:{Pre:t,Code:r,SyntaxHighlighter:n,CodeHeader:o},language:s,code:a})=>{const i=(0,c.useMemo)((()=>({Pre:t,Code:r})),[t,r]),u=s?n:l.DefaultCodeBlockContent;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o,{node:e,language:s,code:a}),(0,p.jsx)(u,{node:e,components:i,language:s??"unknown",code:a})]})}},53923:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{CodeOverride:()=>y}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(35144),p=r(90153),d=r(88299),b=r(74966),m=r(53558),f=r(34843),h=r(33823),g=({node:e,components:{Pre:t,Code:r,SyntaxHighlighter:n,CodeHeader:o},componentsByLanguage:s={},children:a,...i})=>{const u=(0,c.useContext)(l.PreContext),f=(0,b.withDefaultProps)(u),g=(0,d.useCallbackRef)((e=>(0,h.jsx)(t,{...f(e)}))),y=(0,b.withDefaultProps)(i),O=(0,d.useCallbackRef)((e=>(0,h.jsx)(r,{...y(e)}))),v=/language-(\w+)/.exec(i.className||"")?.[1]??"";if("string"!=typeof a)return(0,h.jsx)(m.DefaultCodeBlockContent,{node:e,components:{Pre:g,Code:O},code:a});const P=s[v]?.SyntaxHighlighter??n,j=s[v]?.CodeHeader??o;return(0,h.jsx)(p.DefaultCodeBlock,{node:e,components:{Pre:g,Code:O,SyntaxHighlighter:P,CodeHeader:j},language:v||"unknown",code:a})},y=(0,c.memo)((({node:e,components:t,componentsByLanguage:r,...n})=>(0,l.useIsMarkdownCodeBlock)()?(0,h.jsx)(g,{node:e,components:t,componentsByLanguage:r,...n}):(0,h.jsx)(t.Code,{...n})),((e,t)=>e.components===t.components&&e.componentsByLanguage===t.componentsByLanguage&&(0,f.memoCompareNodes)(e,t)))},35144:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{PreContext:()=>d,PreOverride:()=>m,useIsMarkdownCodeBlock:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(34843),p=r(33823),d=(0,c.createContext)(null),b=()=>null!==(0,c.useContext)(d),m=(0,c.memo)((({children:e,...t})=>(0,p.jsx)(d.Provider,{value:t,children:e})),l.memoCompareNodes)},53558:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{DefaultCode:()=>p,DefaultCodeBlockContent:()=>d,DefaultCodeHeader:()=>b,DefaultPre:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(33823),l=({node:e,...t})=>(0,c.jsx)("pre",{...t}),p=({node:e,...t})=>(0,c.jsx)("code",{...t}),d=({node:e,components:{Pre:t,Code:r},code:n})=>(0,c.jsx)(t,{children:(0,c.jsx)(r,{node:e,children:n})}),b=()=>null},74966:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(p,{withDefaultProps:()=>b}),e.exports=(n=p,l(s({},"__esModule",{value:!0}),n));var d=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(68098)),b=({className:e,...t})=>({className:r,...n})=>({className:(0,d.default)(e,r),...t,...n})},72960:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p=(e,t,r)=>(r=null!=e?o(u(e)):{},l(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)),d={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(d,{MarkdownTextPrimitive:()=>x}),e.exports=(n=d,l(s({},"__esModule",{value:!0}),n));var b=r(28405),m=r(7509),f=p(r(29318)),h=r(35144),g=r(53558),y=r(88299),O=r(53923),v=p(r(68098)),P=r(33823),{useSmooth:j,useSmoothStatus:w,withSmoothContextProvider:_}=b.INTERNAL,S=({components:e,componentsByLanguage:t=e?.by_language,smooth:r=!0,...n})=>{const{text:o}=j((0,b.useContentPartText)(),r),{pre:s=g.DefaultPre,code:a=g.DefaultCode,SyntaxHighlighter:i=g.DefaultCodeBlockContent,CodeHeader:u=g.DefaultCodeHeader}=e??{},c=(0,m.useMemo)((()=>({Pre:s,Code:a,SyntaxHighlighter:i,CodeHeader:u})),[s,a,i,u]),l=(0,y.useCallbackRef)((e=>(0,P.jsx)(O.CodeOverride,{components:c,componentsByLanguage:t,...e}))),p=(0,m.useMemo)((()=>{const{pre:t=g.DefaultPre,code:r=g.DefaultCode,SyntaxHighlighter:n=g.DefaultCodeBlockContent,CodeHeader:o=g.DefaultCodeHeader,by_language:s,...a}=e??{};return{...a,pre:h.PreOverride,code:l}}),[l,e]);return(0,P.jsx)(f.default,{components:p,...n,children:o})},C=(0,m.forwardRef)((({className:e,containerProps:t,containerComponent:r="div",...n},o)=>{const s=w();return(0,P.jsx)(r,{"data-status":s.type,...t,className:(0,v.default)(e,t?.className),ref:o,children:(0,P.jsx)(S,{...n})})}));C.displayName="MarkdownTextPrimitive";var x=_(C)},35297:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantRuntimeImpl:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(17679),l=r(39033),p=class{constructor(e){this._core=e,this.threads=new c.ThreadListRuntimeImpl(e.threads),this._thread=this.threads.main}threads;get threadList(){return this.threads}_thread;__internal_bindMethods(){this.switchToNewThread=this.switchToNewThread.bind(this),this.switchToThread=this.switchToThread.bind(this),this.registerModelContextProvider=this.registerModelContextProvider.bind(this),this.registerModelConfigProvider=this.registerModelConfigProvider.bind(this),this.reset=this.reset.bind(this)}get thread(){return this._thread}switchToNewThread(){return this._core.threads.switchToNewThread()}switchToThread(e){return this._core.threads.switchToThread(e)}registerModelContextProvider(e){return this._core.registerModelContextProvider(e)}registerModelConfigProvider(e){return this.registerModelContextProvider(e)}reset({initialMessages:e}={}){return this._core.threads.getMainThreadRuntimeCore().import(l.ExportedMessageRepository.fromArray(e??[]))}}},16240:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{AttachmentRuntimeImpl:()=>i,EditComposerAttachmentRuntimeImpl:()=>l,MessageAttachmentRuntimeImpl:()=>p,ThreadComposerAttachmentRuntimeImpl:()=>c}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=class{constructor(e){this._core=e}get path(){return this._core.path}__internal_bindMethods(){this.getState=this.getState.bind(this),this.remove=this.remove.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this._core.getState()}subscribe(e){return this._core.subscribe(e)}},u=class extends i{constructor(e,t){super(e),this._composerApi=t}remove(){const e=this._composerApi.getState();if(!e)throw new Error("Composer is not available");return e.removeAttachment(this.getState().id)}},c=class extends u{get source(){return"thread-composer"}},l=class extends u{get source(){return"edit-composer"}},p=class extends i{get source(){return"message"}constructor(e){super(e)}remove(){throw new Error("Message attachments cannot be removed")}}},5782:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ComposerRuntimeImpl:()=>h,EditComposerRuntimeImpl:()=>y,ThreadComposerRuntimeImpl:()=>g}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(58592),l=r(16240),p=r(23928),d=r(87688),b=r(98703),m=Object.freeze([]),f=Object.freeze({}),h=class{constructor(e){this._core=e}get path(){return this._core.path}__internal_bindMethods(){this.setText=this.setText.bind(this),this.setRunConfig=this.setRunConfig.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.addAttachment=this.addAttachment.bind(this),this.reset=this.reset.bind(this),this.clearAttachments=this.clearAttachments.bind(this),this.send=this.send.bind(this),this.cancel=this.cancel.bind(this),this.setRole=this.setRole.bind(this),this.getAttachmentAccept=this.getAttachmentAccept.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_on=this.unstable_on.bind(this)}setText(e){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.setText(e)}setRunConfig(e){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.setRunConfig(e)}addAttachment(e){const t=this._core.getState();if(!t)throw new Error("Composer is not available");return t.addAttachment(e)}reset(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");return e.reset()}clearAttachments(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");return e.clearAttachments()}send(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.send()}cancel(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");e.cancel()}setRole(e){const t=this._core.getState();if(!t)throw new Error("Composer is not available");t.setRole(e)}subscribe(e){return this._core.subscribe(e)}_eventSubscriptionSubjects=new Map;unstable_on(e,t){let r=this._eventSubscriptionSubjects.get(e);return r||(r=new b.EventSubscriptionSubject({event:e,binding:this._core}),this._eventSubscriptionSubjects.set(e,r)),r.subscribe(t)}getAttachmentAccept(){const e=this._core.getState();if(!e)throw new Error("Composer is not available");return e.getAttachmentAccept()}},g=class extends h{get path(){return this._core.path}get type(){return"thread"}_getState;constructor(e){const t=new c.LazyMemoizeSubject({path:e.path,getState:()=>{return t=e.getState(),Object.freeze({type:"thread",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,attachments:t?.attachments??m,text:t?.text??"",role:t?.role??"user",runConfig:t?.runConfig??f,value:t?.text??""});var t},subscribe:t=>e.subscribe(t)});super({path:e.path,getState:()=>e.getState(),subscribe:e=>t.subscribe(e)}),this._getState=t.getState.bind(t)}getState(){return this._getState()}getAttachmentByIndex(e){return new l.ThreadComposerAttachmentRuntimeImpl(new p.ShallowMemoizeSubject({path:{...this.path,attachmentSource:"thread-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{const t=this.getState().attachments[e];return t?{...t,source:"thread-composer"}:d.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}),this._core)}},y=class extends h{constructor(e,t){const r=new c.LazyMemoizeSubject({path:e.path,getState:()=>{return t=e.getState(),Object.freeze({type:"edit",isEditing:t?.isEditing??!1,canCancel:t?.canCancel??!1,isEmpty:t?.isEmpty??!0,text:t?.text??"",role:t?.role??"user",attachments:t?.attachments??m,runConfig:t?.runConfig??f,value:t?.text??""});var t},subscribe:t=>e.subscribe(t)});super({path:e.path,getState:()=>e.getState(),subscribe:e=>r.subscribe(e)}),this._beginEdit=t,this._getState=r.getState.bind(r)}get path(){return this._core.path}get type(){return"edit"}_getState;__internal_bindMethods(){super.__internal_bindMethods(),this.beginEdit=this.beginEdit.bind(this)}getState(){return this._getState()}beginEdit(){this._beginEdit()}getAttachmentByIndex(e){return new l.EditComposerAttachmentRuntimeImpl(new p.ShallowMemoizeSubject({path:{...this.path,attachmentSource:"edit-composer",attachmentSelector:{type:"index",index:e},ref:this.path.ref+`${this.path.ref}.attachments[${e}]`},getState:()=>{const t=this.getState().attachments[e];return t?{...t,source:"edit-composer"}:d.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}),this._core)}}},20402:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{ContentPartRuntimeImpl:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=class{constructor(e,t,r){this.contentBinding=e,this.messageApi=t,this.threadApi=r}get path(){return this.contentBinding.path}__internal_bindMethods(){this.addToolResult=this.addToolResult.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this)}getState(){return this.contentBinding.getState()}addToolResult(e){const t=this.contentBinding.getState();if(!t)throw new Error("Content part is not available");if("tool-call"!==t.type)throw new Error("Tried to add tool result to non-tool content part");if(!this.messageApi)throw new Error("Message API is not available. This is likely a bug in assistant-ui.");if(!this.threadApi)throw new Error("Thread API is not available");const r=this.messageApi.getState();if(!r)throw new Error("Message is not available");const n=t.toolName,o=t.toolCallId;this.threadApi.getState().addToolResult({messageId:r.id,toolName:n,toolCallId:o,result:e})}subscribe(e){return this.contentBinding.subscribe(e)}}},68941:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{MessageRuntimeImpl:()=>v,toContentPartStatus:()=>y}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(43216),l=r(87153),p=r(16240),d=r(5782),b=r(20402),m=r(8699),f=r(87688),h=r(23928),g=Object.freeze({type:"complete"}),y=(e,t,r)=>{if("assistant"!==e.role)return g;if("tool-call"===r.type)return r.result?g:e.status;const n=t===Math.max(0,e.content.length-1);return"requires-action"===e.status.type?g:n?e.status:g},O=(e,t)=>{const r=e.content[t];if(!r)return f.SKIP_UPDATE;const n=y(e,t,r);return Object.freeze({...r,[c.symbolInnerMessage]:r[c.symbolInnerMessage],status:n})},v=class{constructor(e,t){this._core=e,this._threadBinding=t,this.composer=new d.EditComposerRuntimeImpl(new m.NestedSubscriptionSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"edit"},getState:this._getEditComposerRuntimeCore,subscribe:e=>this._threadBinding.subscribe(e)}),(()=>this._threadBinding.getState().beginEdit(this._core.getState().id)))}get path(){return this._core.path}__internal_bindMethods(){this.reload=this.reload.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getContentPartByIndex=this.getContentPartByIndex.bind(this),this.getContentPartByToolCallId=this.getContentPartByToolCallId.bind(this),this.getAttachmentByIndex=this.getAttachmentByIndex.bind(this),this.unstable_getCopyText=this.unstable_getCopyText.bind(this),this.speak=this.speak.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.submitFeedback=this.submitFeedback.bind(this),this.switchToBranch=this.switchToBranch.bind(this)}composer;_getEditComposerRuntimeCore=()=>this._threadBinding.getState().getEditComposer(this._core.getState().id);getState(){return this._core.getState()}reload(e={}){const t=this._getEditComposerRuntimeCore(),r=t??this._threadBinding.getState().composer,n=t??r,{runConfig:o=n.runConfig}=e,s=this._core.getState();if("assistant"!==s.role)throw new Error("Can only reload assistant messages");this._threadBinding.getState().startRun({parentId:s.parentId,sourceId:s.id,runConfig:o})}speak(){const e=this._core.getState();return this._threadBinding.getState().speak(e.id)}stopSpeaking(){const e=this._core.getState(),t=this._threadBinding.getState();if(t.speech?.messageId!==e.id)throw new Error("Message is not being spoken");this._threadBinding.getState().stopSpeaking()}submitFeedback({type:e}){const t=this._core.getState();this._threadBinding.getState().submitFeedback({messageId:t.id,type:e})}switchToBranch({position:e,branchId:t}){const r=this._core.getState();if(t&&e)throw new Error("May not specify both branchId and position");if(!t&&!e)throw new Error("Must specify either branchId or position");const n=this._threadBinding.getState().getBranches(r.id);let o=t;if("previous"===e?o=n[r.branchNumber-2]:"next"===e&&(o=n[r.branchNumber]),!o)throw new Error("Branch not found");this._threadBinding.getState().switchToBranch(o)}unstable_getCopyText(){return(0,l.getThreadMessageText)(this.getState())}subscribe(e){return this._core.subscribe(e)}getContentPartByIndex(e){if(e<0)throw new Error("Content part index must be >= 0");return new b.ContentPartRuntimeImpl(new h.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[${e}]`,contentPartSelector:{type:"index",index:e}},getState:()=>O(this.getState(),e),subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getContentPartByToolCallId(e){return new b.ContentPartRuntimeImpl(new h.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.content[toolCallId=${JSON.stringify(e)}]`,contentPartSelector:{type:"toolCallId",toolCallId:e}},getState:()=>{const t=this._core.getState(),r=t.content.findIndex((t=>"tool-call"===t.type&&t.toolCallId===e));return-1===r?f.SKIP_UPDATE:O(t,r)},subscribe:e=>this._core.subscribe(e)}),this._core,this._threadBinding)}getAttachmentByIndex(e){return new p.MessageAttachmentRuntimeImpl(new h.ShallowMemoizeSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.attachments[${e}]`,attachmentSource:"message",attachmentSelector:{type:"index",index:e}},getState:()=>{const t=this.getState().attachments,r=t?.[e];return r?{...r,source:"message"}:f.SKIP_UPDATE},subscribe:e=>this._core.subscribe(e)}))}}},34067:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{ThreadListItemRuntimeImpl:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=class{constructor(e,t){this._core=e,this._threadListBinding=t}get path(){return this._core.path}__internal_bindMethods(){this.switchTo=this.switchTo.bind(this),this.rename=this.rename.bind(this),this.archive=this.archive.bind(this),this.unarchive=this.unarchive.bind(this),this.delete=this.delete.bind(this),this.initialize=this.initialize.bind(this),this.generateTitle=this.generateTitle.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getState=this.getState.bind(this)}getState(){return this._core.getState()}switchTo(){const e=this._core.getState();return this._threadListBinding.switchToThread(e.id)}rename(e){const t=this._core.getState();return this._threadListBinding.rename(t.id,e)}archive(){const e=this._core.getState();return this._threadListBinding.archive(e.id)}unarchive(){const e=this._core.getState();return this._threadListBinding.unarchive(e.id)}delete(){const e=this._core.getState();return this._threadListBinding.delete(e.id)}initialize(){const e=this._core.getState();return this._threadListBinding.initialize(e.id)}generateTitle(){const e=this._core.getState();return this._threadListBinding.generateTitle(e.id)}unstable_on(e,t){let r=this._core.getState().isMain;return this.subscribe((()=>{const n=this._core.getState().isMain;r!==n&&(r=n,("switched-to"!==e||n)&&("switched-away"===e&&n||t()))}))}subscribe(e){return this._core.subscribe(e)}}},17679:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadListRuntimeImpl:()=>h}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(58592),l=r(34067),p=r(87688),d=r(23928),b=r(40039),m=r(8699),f=(e,t)=>{if(void 0===t)return p.SKIP_UPDATE;const r=e.getItemById(t);return r?{id:r.threadId,threadId:r.threadId,remoteId:r.remoteId,externalId:r.externalId,title:r.title,status:r.status,isMain:r.threadId===e.mainThreadId}:p.SKIP_UPDATE},h=class{constructor(e,t=b.ThreadRuntimeImpl){this._core=e,this._runtimeFactory=t;const r=new c.LazyMemoizeSubject({path:{},getState:()=>{return{mainThreadId:(t=e).mainThreadId,newThread:t.newThreadId,threads:t.threadIds,archivedThreads:t.archivedThreadIds};var t},subscribe:t=>e.subscribe(t)});this._getState=r.getState.bind(r),this._mainThreadListItemRuntime=new l.ThreadListItemRuntimeImpl(new d.ShallowMemoizeSubject({path:{ref:"threadItems[main]",threadSelector:{type:"main"}},getState:()=>f(this._core,this._core.mainThreadId),subscribe:e=>this._core.subscribe(e)}),this._core),this.main=new t(new m.NestedSubscriptionSubject({path:{ref:"threads.main",threadSelector:{type:"main"}},getState:()=>e.getMainThreadRuntimeCore(),subscribe:t=>e.subscribe(t)}),this._mainThreadListItemRuntime)}_getState;__internal_bindMethods(){this.switchToThread=this.switchToThread.bind(this),this.switchToNewThread=this.switchToNewThread.bind(this),this.getState=this.getState.bind(this),this.subscribe=this.subscribe.bind(this),this.getById=this.getById.bind(this),this.getItemById=this.getItemById.bind(this),this.getItemByIndex=this.getItemByIndex.bind(this),this.getArchivedItemByIndex=this.getArchivedItemByIndex.bind(this)}switchToThread(e){return this._core.switchToThread(e)}switchToNewThread(){return this._core.switchToNewThread()}getState(){return this._getState()}subscribe(e){return this._core.subscribe(e)}_mainThreadListItemRuntime;main;get mainItem(){return this._mainThreadListItemRuntime}getById(e){return new this._runtimeFactory(new m.NestedSubscriptionSubject({path:{ref:"threads[threadId="+JSON.stringify(e)+"]",threadSelector:{type:"threadId",threadId:e}},getState:()=>this._core.getThreadRuntimeCore(e),subscribe:e=>this._core.subscribe(e)}),this.mainItem)}getItemByIndex(e){return new l.ThreadListItemRuntimeImpl(new d.ShallowMemoizeSubject({path:{ref:`threadItems[${e}]`,threadSelector:{type:"index",index:e}},getState:()=>f(this._core,this._core.threadIds[e]),subscribe:e=>this._core.subscribe(e)}),this._core)}getArchivedItemByIndex(e){return new l.ThreadListItemRuntimeImpl(new d.ShallowMemoizeSubject({path:{ref:`archivedThreadItems[${e}]`,threadSelector:{type:"archiveIndex",index:e}},getState:()=>f(this._core,this._core.archivedThreadIds[e]),subscribe:e=>this._core.subscribe(e)}),this._core)}getItemById(e){return new l.ThreadListItemRuntimeImpl(new d.ShallowMemoizeSubject({path:{ref:`threadItems[threadId=${e}]`,threadSelector:{type:"threadId",threadId:e}},getState:()=>f(this._core,e),subscribe:e=>this._core.subscribe(e)}),this._core)}}},40039:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadRuntimeImpl:()=>g,getThreadState:()=>h}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(68941),l=r(8699),p=r(23928),d=r(5782),b=r(87688),m=r(98703),f=r(43216),h=(e,t)=>{const r=e.messages.at(-1);return Object.freeze({threadId:t.id,metadata:t,capabilities:e.capabilities,isDisabled:e.isDisabled,isRunning:"assistant"===r?.role&&"running"===r.status.type,messages:e.messages,suggestions:e.suggestions,extras:e.extras,speech:e.speech})},g=class{get path(){return this._threadBinding.path}get __internal_threadBinding(){return this._threadBinding}_threadBinding;constructor(e,t){const r=new p.ShallowMemoizeSubject({path:e.path,getState:()=>h(e.getState(),t.getState()),subscribe:r=>{const n=e.subscribe(r),o=t.subscribe(r);return()=>{n(),o()}}});this._threadBinding={path:e.path,getState:()=>e.getState(),getStateState:()=>r.getState(),outerSubscribe:t=>e.outerSubscribe(t),subscribe:t=>e.subscribe(t)},this.composer=new d.ThreadComposerRuntimeImpl(new l.NestedSubscriptionSubject({path:{...this.path,ref:this.path.ref+`${this.path.ref}.composer`,composerSource:"thread"},getState:()=>this._threadBinding.getState().composer,subscribe:e=>this._threadBinding.subscribe(e)}))}__internal_bindMethods(){this.append=this.append.bind(this),this.unstable_resumeRun=this.unstable_resumeRun.bind(this),this.startRun=this.startRun.bind(this),this.cancelRun=this.cancelRun.bind(this),this.stopSpeaking=this.stopSpeaking.bind(this),this.export=this.export.bind(this),this.import=this.import.bind(this),this.getMesssageByIndex=this.getMesssageByIndex.bind(this),this.getMesssageById=this.getMesssageById.bind(this),this.subscribe=this.subscribe.bind(this),this.unstable_on=this.unstable_on.bind(this),this.getModelContext=this.getModelContext.bind(this),this.getModelConfig=this.getModelConfig.bind(this),this.getState=this.getState.bind(this)}composer;getState(){return this._threadBinding.getStateState()}append(e){this._threadBinding.getState().append(((e,t)=>"string"==typeof t?{parentId:e.at(-1)?.id??null,sourceId:null,runConfig:{},role:"user",content:[{type:"text",text:t}],attachments:[]}:t.role&&t.parentId&&t.attachments?t:{...t,parentId:t.parentId??e.at(-1)?.id??null,sourceId:t.sourceId??null,role:t.role??"user",attachments:t.attachments??[]})(this._threadBinding.getState().messages,e))}subscribe(e){return this._threadBinding.subscribe(e)}getModelContext(){return this._threadBinding.getState().getModelContext()}getModelConfig(){return this.getModelContext()}startRun(e){const t=null===e||"string"==typeof e?{parentId:e}:e;return this._threadBinding.getState().startRun({parentId:(r=t).parentId??null,sourceId:r.sourceId??null,runConfig:r.runConfig??{}});var r}unstable_resumeRun(e){return this._threadBinding.getState().resumeRun({parentId:(t=e).parentId??null,sourceId:t.sourceId??null,runConfig:t.runConfig??{},stream:t.stream});var t}cancelRun(){this._threadBinding.getState().cancelRun()}stopSpeaking(){return this._threadBinding.getState().stopSpeaking()}export(){return this._threadBinding.getState().export()}import(e){this._threadBinding.getState().import(e)}getMesssageByIndex(e){if(e<0)throw new Error("Message index must be >= 0");return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[${e}]`,messageSelector:{type:"index",index:e}},(()=>{const t=this._threadBinding.getState().messages,r=t[e];if(r)return{message:r,parentId:t[e-1]?.id??null}}))}getMesssageById(e){return this._getMessageRuntime({...this.path,ref:this.path.ref+`${this.path.ref}.messages[messageId=${JSON.stringify(e)}]`,messageSelector:{type:"messageId",messageId:e}},(()=>this._threadBinding.getState().getMessageById(e)))}_getMessageRuntime(e,t){return new c.MessageRuntimeImpl(new p.ShallowMemoizeSubject({path:e,getState:()=>{const{message:e,parentId:r}=t()??{},{messages:n,speech:o}=this._threadBinding.getState();if(!e||void 0===r)return b.SKIP_UPDATE;const s=this._threadBinding.getState(),a=s.getBranches(e.id),i=s.getSubmittedFeedback(e.id);return{...e,[f.symbolInnerMessage]:e[f.symbolInnerMessage],isLast:n.at(-1)?.id===e.id,parentId:r,branchNumber:a.indexOf(e.id)+1,branchCount:a.length,speech:o?.messageId===e.id?o:void 0,submittedFeedback:i}},subscribe:e=>this._threadBinding.subscribe(e)}),this._threadBinding)}_eventSubscriptionSubjects=new Map;unstable_on(e,t){let r=this._eventSubscriptionSubjects.get(e);return r||(r=new m.EventSubscriptionSubject({event:e,binding:this._threadBinding}),this._eventSubscriptionSubjects.set(e,r)),r.subscribe(t)}}},74461:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t))},75906:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{BaseSubject:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=class{_subscriptions=new Set;_connection;get isConnected(){return!!this._connection}notifySubscribers(){for(const e of this._subscriptions)e()}_updateConnection(){if(this._subscriptions.size>0){if(this._connection)return;this._connection=this._connect()}else this._connection?.(),this._connection=void 0}subscribe(e){return this._subscriptions.add(e),this._updateConnection(),()=>{this._subscriptions.delete(e),this._updateConnection()}}}},98703:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{EventSubscriptionSubject:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(75906),l=class extends c.BaseSubject{constructor(e){super(),this.config=e}getState(){return this.config.binding.getState()}outerSubscribe(e){return this.config.binding.subscribe(e)}_connect(){const e=()=>{this.notifySubscribers()};let t=this.config.binding.getState(),r=t?.unstable_on(this.config.event,e);const n=this.outerSubscribe((()=>{const n=this.config.binding.getState();n!==t&&(t=n,r?.(),r=this.config.binding.getState()?.unstable_on(this.config.event,e))}));return()=>{n?.(),r?.()}}}},58592:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{LazyMemoizeSubject:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(75906),l=r(87688),p=class extends c.BaseSubject{constructor(e){super(),this.binding=e}get path(){return this.binding.path}_previousStateDirty=!0;_previousState;getState=()=>{if(!this.isConnected||this._previousStateDirty){const e=this.binding.getState();e!==l.SKIP_UPDATE&&(this._previousState=e),this._previousStateDirty=!1}if(void 0===this._previousState)throw new Error("Entry not available in the store");return this._previousState};_connect(){return this.binding.subscribe((()=>{this._previousStateDirty=!0,this.notifySubscribers()}))}}},8699:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{NestedSubscriptionSubject:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(75906),l=class extends c.BaseSubject{constructor(e){super(),this.binding=e}get path(){return this.binding.path}getState(){return this.binding.getState()}outerSubscribe(e){return this.binding.subscribe(e)}_connect(){const e=()=>{this.notifySubscribers()};let t=this.binding.getState(),r=t?.subscribe(e);const n=this.outerSubscribe((()=>{const n=this.binding.getState();n!==t&&(t=n,r?.(),r=this.binding.getState()?.subscribe(e),e())}));return()=>{n?.(),r?.()}}}},87688:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{SKIP_UPDATE:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=Symbol("skip-update")},23928:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ShallowMemoizeSubject:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(51667),l=r(75906),p=r(87688),d=class extends l.BaseSubject{constructor(e){super(),this.binding=e;const t=e.getState();if(t===p.SKIP_UPDATE)throw new Error("Entry not available in the store");this._previousState=t}get path(){return this.binding.path}_previousState;getState=()=>(this.isConnected||this._syncState(),this._previousState);_syncState(){const e=this.binding.getState();return e!==p.SKIP_UPDATE&&!(0,c.shallowEqual)(e,this._previousState)&&(this._previousState=e,!0)}_connect(){return this.binding.subscribe((()=>{this._syncState()&&this.notifySubscribers()}))}}},51667:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function i(e,t){if(void 0===e&&void 0===t)return!0;if(void 0===e)return!1;if(void 0===t)return!1;for(const r of Object.keys(e)){const n=e[r],o=t[r];if(!Object.is(n,o))return!1}return!0}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{shallowEqual:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t))},76908:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantCloud:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(55636),l=r(5054),p=r(92109),d=r(64656),b=class{threads;auth;runs;constructor(e){const t=new c.AssistantCloudAPI(e);this.threads=new d.AssistantCloudThreads(t),this.auth={tokens:new l.AssistantCloudAuthTokens(t)},this.runs=new p.AssistantCloudRuns(t)}}},55636:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantCloudAPI:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(76380),l=class extends Error{constructor(e){super(e),this.name="APIError"}},p=class{_auth;_baseUrl;constructor(e){if("authToken"in e)this._baseUrl=e.baseUrl,this._auth=new c.AssistantCloudJWTAuthStrategy(e.authToken);else if("apiKey"in e)this._baseUrl="https://backend.assistant-api.com",this._auth=new c.AssistantCloudAPIKeyAuthStrategy(e.apiKey,e.userId,e.workspaceId);else{if(!("anonymous"in e))throw new Error("Invalid configuration: Must provide authToken, apiKey, or anonymous configuration");this._baseUrl=e.baseUrl,this._auth=new c.AssistantCloudAnonymousAuthStrategy(e.baseUrl)}}async initializeAuth(){return!!this._auth.getAuthHeaders()}async makeRawRequest(e,t={}){const r=await this._auth.getAuthHeaders();if(!r)throw new Error("Authorization failed");const n={...r,...t.headers,"Content-Type":"application/json"},o=new URLSearchParams;if(t.query)for(const[e,r]of Object.entries(t.query))!1!==r&&(!0===r?o.set(e,"true"):o.set(e,r.toString()));const s=new URL(`${this._baseUrl}/v1${e}`);s.search=o.toString();const a=await fetch(s,{method:t.method??"GET",headers:n,body:t.body?JSON.stringify(t.body):null});if(this._auth.readAuthHeaders(a.headers),!a.ok){const e=await a.text();try{const t=JSON.parse(e);throw new l(t.message)}catch{throw new Error(`Request failed with status ${a.status}, ${e}`)}}return a}async makeRequest(e,t={}){return(await this.makeRawRequest(e,t)).json()}}},76380:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{AssistantCloudAPIKeyAuthStrategy:()=>c,AssistantCloudAnonymousAuthStrategy:()=>p,AssistantCloudJWTAuthStrategy:()=>u}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=e=>{try{const t=e.split(".")[1];if(!t)throw new Error("Invalid JWT format");let r=t.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4!=0;)r+="=";const n=atob(r),o=JSON.parse(n).exp;if(!o||"number"!=typeof o)throw new Error('JWT does not contain a valid "exp" field');return 1e3*o}catch(e){throw new Error("Unable to determine the token expiry: "+e)}},u=class{strategy="jwt";cachedToken=null;tokenExpiry=null;#e;constructor(e){this.#e=e}async getAuthHeaders(){const e=Date.now();if(this.cachedToken&&this.tokenExpiry&&this.tokenExpiry-e>3e4)return{Authorization:`Bearer ${this.cachedToken}`};const t=await this.#e();return!!t&&(this.cachedToken=t,this.tokenExpiry=i(t),{Authorization:`Bearer ${t}`})}readAuthHeaders(e){const t=e.get("Authorization");if(!t)return;const[r,n]=t.split(" ");if("Bearer"!==r||!n)throw new Error("Invalid auth header received");this.cachedToken=n,this.tokenExpiry=i(n)}},c=class{strategy="api-key";#t;#r;#n;constructor(e,t,r){this.#t=e,this.#r=t,this.#n=r}async getAuthHeaders(){return{Authorization:`Bearer ${this.#t}`,"Aui-User-Id":this.#r,"Aui-Workspace-Id":this.#n}}readAuthHeaders(){}},l="aui:refresh_token",p=class{strategy="anon";baseUrl;jwtStrategy;constructor(e){this.baseUrl=e,this.jwtStrategy=new u((async()=>{const e=Date.now(),t=localStorage.getItem(l),r=t?JSON.parse(t):void 0;if(r)if(new Date(r.expires_at).getTime()-e>3e4){const e=await fetch(`${this.baseUrl}/v1/auth/tokens/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:r.token})});if(e.ok){const t=await e.json(),{access_token:r,refresh_token:n}=t;return n&&localStorage.setItem(l,JSON.stringify(n)),r}}else localStorage.removeItem(l);const n=await fetch(`${this.baseUrl}/v1/auth/tokens/anonymous`,{method:"POST"});if(!n.ok)return null;const o=await n.json(),{access_token:s,refresh_token:a}=o;return s&&a?(localStorage.setItem(l,JSON.stringify(a)),s):null}))}async getAuthHeaders(){return this.jwtStrategy.getAuthHeaders()}readAuthHeaders(e){this.jwtStrategy.readAuthHeaders(e)}}},5054:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{AssistantCloudAuthTokens:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=class{constructor(e){this.cloud=e}async create(){return this.cloud.makeRequest("/auth/tokens",{method:"POST"})}}},92109:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantCloudRuns:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(29158),l=class{constructor(e){this.cloud=e}async stream(e){const t=await this.cloud.makeRawRequest("/runs/stream",{method:"POST",headers:{Accept:"text/plain"},body:e});return c.AssistantStream.fromResponse(t,new c.PlainTextDecoder)}}},13667:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useAssistantCloudThreadHistoryAdapter:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(76065),p=r(91687),d=class{constructor(e,t){this.cloudRef=e,this.threadListItemRuntime=t}_getIdForLocalId={};async append({parentId:e,message:t}){const{remoteId:r}=await this.threadListItemRuntime.initialize(),n=this.cloudRef.current.threads.messages.create(r,{parent_id:e?await this._getIdForLocalId[e]??e:null,format:"aui/v0",content:(0,p.auiV0Encode)(t)}).then((({message_id:e})=>(this._getIdForLocalId[t.id]=e,e)));return this._getIdForLocalId[t.id]=n,n.then((()=>{}))}async load(){const e=this.threadListItemRuntime.getState().remoteId;if(!e)return{messages:[]};const{messages:t}=await this.cloudRef.current.threads.messages.list(e);return{messages:t.filter((e=>"aui/v0"===e.format)).map(p.auiV0Decode).reverse()}}},b=e=>{const t=(0,l.useThreadListItemRuntime)(),[r]=(0,c.useState)((()=>new d(e,t)));return r}},58329:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{AssistantCloudThreadMessages:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=class{constructor(e){this.cloud=e}async list(e){return this.cloud.makeRequest(`/threads/${encodeURIComponent(e)}/messages`)}async create(e,t){return this.cloud.makeRequest(`/threads/${encodeURIComponent(e)}/messages`,{method:"POST",body:t})}}},64656:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantCloudThreads:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(58329),l=class{constructor(e){this.cloud=e,this.messages=new c.AssistantCloudThreadMessages(e)}messages;async list(e){return this.cloud.makeRequest("/threads",{query:e})}async create(e){return this.cloud.makeRequest("/threads",{method:"POST",body:e})}async update(e,t){return this.cloud.makeRequest(`/threads/${encodeURIComponent(e)}`,{method:"PUT",body:t})}async delete(e){return this.cloud.makeRequest(`/threads/${encodeURIComponent(e)}`,{method:"DELETE"})}}},91687:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{auiV0Decode:()=>d,auiV0Encode:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(89129),l=r(20686),p=e=>({role:e.role,content:e.content.map((e=>{const t=e.type;switch(t){case"text":return{type:"text",text:e.text};case"reasoning":return{type:"reasoning",text:e.text};case"source":return{type:"source",sourceType:e.sourceType,id:e.id,url:e.url,...e.title?{title:e.title}:void 0};case"tool-call":return(0,l.isJSONValue)(e.result)||console.warn("tool-call result is not JSON! "+JSON.stringify(e)),{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,...JSON.stringify(e.args)===e.argsText?{args:e.args}:{argsText:e.argsText},...e.result?{result:e.result}:{},...e.isError?{isError:!0}:{}};default:throw new Error(`Content part type not supported by aui/v0: ${t}`)}})),metadata:e.metadata,...e.status?{status:"running"===e.status?.type?{type:"incomplete",reason:"cancelled"}:e.status}:void 0}),d=e=>{const t=e.content,r=(0,c.fromThreadMessageLike)({id:e.id,createdAt:e.created_at,...t},e.id,{type:"complete",reason:"unknown"});return{parentId:e.parent_id,message:r}}},38126:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantCloud:()=>l.AssistantCloud,useCloudThreadListRuntime:()=>c.useCloudThreadListRuntime}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(72259),l=r(76908)},72259:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useCloudThreadListRuntime:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7763),l=r(65848),p=({runtimeHook:e,...t})=>{const r=(0,l.useCloudThreadListAdapter)(t);return(0,c.useRemoteThreadListRuntime)({runtimeHook:e,adapter:r})}},31475:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{writableStore:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=e=>e},76065:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of a(t))i.call(e,u)||u===r||o(e,u,{get:()=>t[u],enumerable:!(n=s(t,u))||n.enumerable});return e},c=(e,t,r)=>(u(e,t,"default"),r&&u(r,t,"default")),l={};e.exports=(n=l,u(o({},"__esModule",{value:!0}),n)),c(l,r(68358),e.exports),c(l,r(32136),e.exports),c(l,r(60893),e.exports)},33792:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantRuntimeProvider:()=>y,AssistantRuntimeProviderImpl:()=>g}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(41708),p=r(56107),d=r(25305),b=r(10661),m=r(31475),f=r(90),h=r(33823),g=({children:e,runtime:t})=>{const r=(e=>{const[t]=(0,c.useState)((()=>(0,b.create)((()=>e))));return(0,c.useEffect)((()=>{(0,f.ensureBinding)(e),(0,f.ensureBinding)(e.threads),(0,m.writableStore)(t).setState(e,!0)}),[e,t]),t})(t),n=(0,c.useMemo)((()=>(0,p.makeAssistantToolUIsStore)()),[]),[o]=(0,c.useState)((()=>({useToolUIs:n,useAssistantRuntime:r}))),s=(e=>e._core?.RenderComponent)(t);return(0,h.jsxs)(l.AssistantContext.Provider,{value:o,children:[s&&(0,h.jsx)(s,{}),(0,h.jsx)(d.ThreadRuntimeProvider,{runtime:t.thread,listItemRuntime:t.threads.mainItem,children:e})]})},y=(0,c.memo)(g)},73915:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AttachmentRuntimeProvider:()=>f}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(10661),p=r(34563),d=r(31475),b=r(90),m=r(33823),f=({runtime:e,children:t})=>{const r=(e=>{const[t]=(0,c.useState)((()=>(0,l.create)((()=>e))));return(0,c.useEffect)((()=>{(0,b.ensureBinding)(e),(0,d.writableStore)(t).setState(e,!0)}),[e,t]),t})(e),[n]=(0,c.useState)((()=>({useAttachmentRuntime:r})));return(0,m.jsx)(p.AttachmentContext.Provider,{value:n,children:t})}},86190:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ContentPartRuntimeProvider:()=>f}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(10661),p=r(34421),d=r(31475),b=r(90),m=r(33823),f=({runtime:e,children:t})=>{const r=(e=>{const[t]=(0,c.useState)((()=>(0,l.create)((()=>e))));return(0,c.useEffect)((()=>{(0,b.ensureBinding)(e),(0,d.writableStore)(t).setState(e,!0)}),[e,t]),t})(e),[n]=(0,c.useState)((()=>({useContentPartRuntime:r})));return(0,m.jsx)(p.ContentPartContext.Provider,{value:n,children:t})}},36792:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{MessageRuntimeProvider:()=>h}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(10661),p=r(60546),d=r(6575),b=r(31475),m=r(90),f=r(33823),h=({runtime:e,children:t})=>{const r=(e=>{const[t]=(0,c.useState)((()=>(0,l.create)((()=>e))));return(0,c.useEffect)((()=>{(0,m.ensureBinding)(e),(0,b.writableStore)(t).setState(e,!0)}),[e,t]),t})(e),n=(()=>{const[e]=(0,c.useState)((()=>(0,d.makeMessageUtilsStore)()));return e})(),[o]=(0,c.useState)((()=>({useMessageRuntime:r,useMessageUtils:n})));return(0,f.jsx)(p.MessageContext.Provider,{value:o,children:t})}},36827:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{TextContentPartProvider:()=>y}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(10661),p=r(34421),d=r(31475),b=r(20402),m=r(90),f=r(33823),h={type:"complete"},g={type:"running"},y=({children:e,text:t,isRunning:r})=>{const[n]=(0,c.useState)((()=>{const e=(0,l.create)((()=>({status:r?g:h,type:"text",text:t}))),n=new b.ContentPartRuntimeImpl({path:{ref:"text",threadSelector:{type:"main"},messageSelector:{type:"messageId",messageId:""},contentPartSelector:{type:"index",index:0}},getState:e.getState,subscribe:e.subscribe});return(0,m.ensureBinding)(n),{useContentPartRuntime:(0,l.create)((()=>n)),useContentPart:e}}));return(0,c.useEffect)((()=>{const e=n.useContentPart.getState(),o=e.text!==t,s=r?g:h,a=e.status!==s;(o||a)&&(0,d.writableStore)(n.useContentPart).setState({type:"text",text:t,status:s},!0)}),[n,r,t]),(0,f.jsx)(p.ContentPartContext.Provider,{value:n,children:e})}},18491:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadListItemRuntimeProvider:()=>f}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(10661),p=r(15571),d=r(31475),b=r(90),m=r(33823),f=({runtime:e,children:t})=>{const r=(e=>{const[t]=(0,c.useState)((()=>(0,l.create)((()=>e))));return(0,c.useEffect)((()=>{(0,b.ensureBinding)(e),(0,d.writableStore)(t).setState(e,!0)}),[e,t]),t})(e),[n]=(0,c.useState)((()=>({useThreadListItemRuntime:r})));return(0,m.jsx)(p.ThreadListItemContext.Provider,{value:n,children:t})}},25305:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadRuntimeProvider:()=>g}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(64426),p=r(31475),d=r(10661),b=r(18491),m=r(90),f=r(41161),h=r(33823),g=({children:e,listItemRuntime:t,runtime:r})=>{const n=(e=>{const[t]=(0,c.useState)((()=>(0,d.create)((()=>e))));return(0,c.useEffect)((()=>{(0,m.ensureBinding)(e),(0,m.ensureBinding)(e.composer),(0,p.writableStore)(t).setState(e,!0)}),[e,t]),t})(r),[o]=(0,c.useState)((()=>({useThreadRuntime:n})));return(0,h.jsx)(b.ThreadListItemRuntimeProvider,{runtime:t,children:(0,h.jsx)(l.ThreadContext.Provider,{value:o,children:(0,h.jsx)(f.ThreadViewportProvider,{children:e})})})}},41161:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadViewportProvider:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(72610),p=r(89429),d=r(31475),b=r(33823),m=({children:e})=>{const t=(()=>{const e=(0,p.useThreadViewportStore)({optional:!0}),[t]=(0,c.useState)((()=>(0,l.makeThreadViewportStore)()));return(0,c.useEffect)((()=>e?.getState().onScrollToBottom((()=>{t.getState().scrollToBottom()}))),[e,t]),(0,c.useEffect)((()=>{if(e)return t.subscribe((t=>{e.getState().isAtBottom!==t.isAtBottom&&(0,d.writableStore)(e).setState({isAtBottom:t.isAtBottom})}))}),[t,e]),t})(),[r]=(0,c.useState)((()=>({useThreadViewport:t})));return(0,b.jsx)(p.ThreadViewportContext.Provider,{value:r,children:e})}},68358:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantRuntimeProvider:()=>c.AssistantRuntimeProvider,TextContentPartProvider:()=>l.TextContentPartProvider}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(33792),l=r(36827)},41708:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AssistantContext:()=>b,useAssistantContext:()=>m,useAssistantRuntime:()=>f,useThreadList:()=>y,useToolUIs:()=>h,useToolUIsStore:()=>g}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(56024),p=r(58755),d=r(27683),b=(0,c.createContext)(null),m=(0,l.createContextHook)(b,"AssistantRuntimeProvider");function f(e){const t=m(e);return t?t.useAssistantRuntime():null}var{useToolUIs:h,useToolUIsStore:g}=(0,p.createContextStoreHook)(m,"useToolUIs"),y=(0,d.createStateHookForRuntime)((e=>f(e)?.threads??null))},34563:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AttachmentContext:()=>d,useAttachment:()=>y,useAttachmentRuntime:()=>m,useEditComposerAttachment:()=>v,useEditComposerAttachmentRuntime:()=>h,useMessageAttachment:()=>P,useMessageAttachmentRuntime:()=>g,useThreadComposerAttachment:()=>O,useThreadComposerAttachmentRuntime:()=>f}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(56024),p=r(27683),d=(0,c.createContext)(null),b=(0,l.createContextHook)(d,"a ComposerPrimitive.Attachments or MessagePrimitive.Attachments component");function m(e){const t=b(e);return t?t.useAttachmentRuntime():null}function f(e){const t=m(e);if(!t)return null;if("thread-composer"!==t.source)throw new Error("This component must be used within a thread's ComposerPrimitive.Attachments component.");return t}function h(e){const t=m(e);if(!t)return null;if("edit-composer"!==t.source)throw new Error("This component must be used within a message's ComposerPrimitive.Attachments component.");return t}function g(e){const t=m(e);if(!t)return null;if("message"!==t.source)throw new Error("This component must be used within a MessagePrimitive.Attachments component.");return t}var y=(0,p.createStateHookForRuntime)(m),O=(0,p.createStateHookForRuntime)(f),v=(0,p.createStateHookForRuntime)(h),P=(0,p.createStateHookForRuntime)(g)},69567:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useComposer:()=>d,useComposerRuntime:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(60546),l=r(64426);function p(e){const t=(0,c.useMessageRuntime)({optional:!0}),r=(0,l.useThreadRuntime)(e);return t?t.composer:r?.composer??null}var d=(0,r(27683).createStateHookForRuntime)(p)},34421:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ContentPartContext:()=>d,useContentPart:()=>f,useContentPartRuntime:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(56024),p=r(27683),d=(0,c.createContext)(null),b=(0,l.createContextHook)(d,"a component passed to <MessagePrimitive.Content components={...}>");function m(e){const t=b(e);return t?t.useContentPartRuntime():null}var f=(0,p.createStateHookForRuntime)(m)},60546:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{MessageContext:()=>b,useEditComposer:()=>g,useMessage:()=>h,useMessageRuntime:()=>f,useMessageUtils:()=>y,useMessageUtilsStore:()=>O}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(56024),p=r(58755),d=r(27683),b=(0,c.createContext)(null),m=(0,l.createContextHook)(b,"a component passed to <ThreadPrimitive.Messages components={...} />");function f(e){const t=m(e);return t?t.useMessageRuntime():null}var h=(0,d.createStateHookForRuntime)(f),g=(0,d.createStateHookForRuntime)((e=>f(e)?.composer??null)),{useMessageUtils:y,useMessageUtilsStore:O}=(0,p.createContextStoreHook)(m,"useMessageUtils")},64426:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadContext:()=>d,useThread:()=>f,useThreadComposer:()=>h,useThreadModelContext:()=>g,useThreadRuntime:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(56024),p=r(27683),d=(0,c.createContext)(null),b=(0,l.createContextHook)(d,"AssistantRuntimeProvider");function m(e){const t=b(e);return t?t.useThreadRuntime():null}var f=(0,p.createStateHookForRuntime)(m),h=(0,p.createStateHookForRuntime)((e=>m(e)?.composer??null));function g(e){const[,t]=(0,c.useState)({}),r=m(e);return(0,c.useEffect)((()=>r?.unstable_on("model-context-update",(()=>t({})))),[r]),r?r?.getModelContext():null}},15571:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadListItemContext:()=>d,useThreadListItem:()=>f,useThreadListItemRuntime:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(56024),p=r(27683),d=(0,c.createContext)(null),b=(0,l.createContextHook)(d,"a component passed to <ThreadListPrimitive.Items components={...}>");function m(e){const t=b(e);return t?t.useThreadListItemRuntime():null}var f=(0,p.createStateHookForRuntime)(m)},89429:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ThreadViewportContext:()=>d,useThreadViewport:()=>m,useThreadViewportStore:()=>f}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(56024),p=r(58755),d=(0,c.createContext)(null),b=(0,l.createContextHook)(d,"ThreadPrimitive.Viewport"),{useThreadViewport:m,useThreadViewportStore:f}=(0,p.createContextStoreHook)(b,"useThreadViewport")},60893:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useAssistantRuntime:()=>c.useAssistantRuntime,useAttachment:()=>h.useAttachment,useAttachmentRuntime:()=>h.useAttachmentRuntime,useComposer:()=>f.useComposer,useComposerRuntime:()=>f.useComposerRuntime,useContentPart:()=>m.useContentPart,useContentPartRuntime:()=>m.useContentPartRuntime,useEditComposer:()=>b.useEditComposer,useMessage:()=>b.useMessage,useMessageRuntime:()=>b.useMessageRuntime,useMessageUtils:()=>b.useMessageUtils,useMessageUtilsStore:()=>b.useMessageUtilsStore,useRuntimeState:()=>g.useRuntimeState,useThread:()=>l.useThread,useThreadComposer:()=>l.useThreadComposer,useThreadList:()=>c.useThreadList,useThreadListItem:()=>d.useThreadListItem,useThreadListItemRuntime:()=>d.useThreadListItemRuntime,useThreadModelConfig:()=>l.useThreadModelContext,useThreadModelContext:()=>l.useThreadModelContext,useThreadRuntime:()=>l.useThreadRuntime,useThreadViewport:()=>p.useThreadViewport,useThreadViewportStore:()=>p.useThreadViewportStore,useToolUIs:()=>c.useToolUIs,useToolUIsStore:()=>c.useToolUIsStore}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(41708),l=r(64426),p=r(89429),d=r(15571),b=r(60546),m=r(34421),f=r(69567),h=r(34563),g=r(36694)},56024:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{createContextHook:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509);function l(e,t){return function(r){const n=(0,c.useContext)(e);if(!r?.optional&&!n)throw new Error(`This component must be used within ${t}.`);return n}}},58755:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function i(e,t){function r(r){const n=e(r);return n?n[t]:null}return{[t]:function(e){let t,n=!1;"function"==typeof e?t=e:e&&"object"==typeof e&&(n=!!e.optional,t=e.selector);const o=r({optional:n});return o?t?o(t):o():null},[`${t}Store`]:r}}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{createContextStoreHook:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t))},27683:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{createStateHookForRuntime:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(36694);function l(e){return function(t){let r,n=!1;"function"==typeof t?r=t:t&&(n=!!t.optional,r=t.selector);const o=e({optional:n});return o?(0,c.useRuntimeStateInternal)(o,r):null}}},90:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{ensureBinding:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=e=>{const t=e;t.__isBound||(t.__internal_bindMethods?.(),t.__isBound=!0)}},36694:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useRuntimeState:()=>b,useRuntimeStateInternal:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(90);function p(e,t=d){(0,l.ensureBinding)(e);const r=(0,c.useSyncExternalStore)(e.subscribe,(()=>t(e.getState())),(()=>t(e.getState())));return(0,c.useDebugValue)(r),r}var d=e=>e;function b(e,t){return p(e,t)}},56107:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{makeAssistantToolUIsStore:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(10661),l=()=>(0,c.create)((e=>{const t=new Map;return Object.freeze({getToolUI:e=>{const r=t.get(e),n=r?.at(-1);return n||null},setToolUI:(r,n)=>{let o=t.get(r);return o||(o=[],t.set(r,o)),o.push(n),e({}),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1),t===o.length&&e({})}}})}))},6575:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{makeMessageUtilsStore:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(10661),l=()=>(0,c.create)((e=>({isCopied:!1,setIsCopied:t=>{e({isCopied:t})},isHovering:!1,setIsHovering:t=>{e({isHovering:t})}})))},72610:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{makeThreadViewportStore:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(10661),l=()=>{const e=new Set;return(0,c.create)((()=>({isAtBottom:!0,scrollToBottom:()=>{for(const t of e)t()},onScrollToBottom:t=>(e.add(t),()=>{e.delete(t)})})))}},32136:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty;e.exports=(t={},((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t))},28405:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p=(e,t,r)=>(l(e,t,"default"),r&&l(r,t,"default")),d={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(d,{INTERNAL:()=>m,unstable_useToolArgsFieldStatus:()=>b.useToolArgsFieldStatus}),e.exports=(n=d,l(s({},"__esModule",{value:!0}),n)),p(d,r(74461),e.exports),p(d,r(38126),e.exports),p(d,r(76065),e.exports),p(d,r(82597),e.exports),p(d,r(40798),e.exports),p(d,r(39033),e.exports),p(d,r(99820),e.exports);var b=r(62437),m=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(51764))},51764:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of a(t))i.call(e,u)||u===r||o(e,u,{get:()=>t[u],enumerable:!(n=s(t,u))||n.enumerable});return e},c={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(c,{AssistantRuntimeImpl:()=>f.AssistantRuntimeImpl,BaseAssistantRuntimeCore:()=>b.BaseAssistantRuntimeCore,CompositeContextProvider:()=>p.CompositeContextProvider,DefaultThreadComposerRuntimeCore:()=>l.DefaultThreadComposerRuntimeCore,EdgeRuntimeRequestOptionsSchema:()=>O.EdgeRuntimeRequestOptionsSchema,MessageRepository:()=>d.MessageRepository,ThreadRuntimeImpl:()=>h.ThreadRuntimeImpl,fromThreadMessageLike:()=>g.fromThreadMessageLike,generateId:()=>m.generateId,getAutoStatus:()=>y.getAutoStatus}),e.exports=(n=c,u(o({},"__esModule",{value:!0}),n));var l=r(96857),p=r(76614),d=r(94533),b=r(32551),m=r(93511),f=r(35297),h=r(40039),g=r(89129),y=r(89549),O=r(58153);((e,t,r)=>{u(e,t,"default"),r&&u(r,t,"default")})(c,r(80725),e.exports)},40387:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{LanguageModelConfigSchema:()=>p,LanguageModelV1CallSettingsSchema:()=>l,mergeModelContexts:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(23194),l=c.z.object({maxTokens:c.z.number().int().positive().optional(),temperature:c.z.number().optional(),topP:c.z.number().optional(),presencePenalty:c.z.number().optional(),frequencyPenalty:c.z.number().optional(),seed:c.z.number().int().optional(),headers:c.z.record(c.z.string().optional()).optional()}),p=c.z.object({apiKey:c.z.string().optional(),baseUrl:c.z.string().optional(),modelName:c.z.string().optional()}),d=e=>Array.from(e).map((e=>e.getModelContext())).sort(((e,t)=>(t.priority??0)-(e.priority??0))).reduce(((e,t)=>{if(t.system&&(e.system?e.system+=`\n\n${t.system}`:e.system=t.system),t.tools)for(const[r,n]of Object.entries(t.tools)){const t=e.tools?.[r];if(t&&t!==n)throw new Error(`You tried to define a tool with the name ${r}, but it already exists.`);e.tools||(e.tools={}),e.tools[r]=n}return t.config&&(e.config={...e.config,...t.config}),t.callSettings&&(e.callSettings={...e.callSettings,...t.callSettings}),e}),{})},82597:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{makeAssistantReadable:()=>h.makeAssistantVisible,makeAssistantTool:()=>c.makeAssistantTool,makeAssistantToolUI:()=>l.makeAssistantToolUI,makeAssistantVisible:()=>g.makeAssistantVisible,tool:()=>f.tool,useAssistantInstructions:()=>p.useAssistantInstructions,useAssistantTool:()=>d.useAssistantTool,useAssistantToolUI:()=>b.useAssistantToolUI,useInlineRender:()=>m.useInlineRender}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(51027),l=r(66319),p=r(1186),d=r(6235),b=r(67513),m=r(65926),f=r(95437),h=r(40884),g=r(40884)},51027:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{makeAssistantTool:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(6235),l=e=>{const t=()=>((0,c.useAssistantTool)(e),null);return t.unstable_tool=e,t}},66319:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{makeAssistantToolUI:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(67513),l=e=>{const t=()=>((0,c.useAssistantToolUI)(e),null);return t.unstable_tool=e,t}},40884:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{default:()=>O,makeAssistantVisible:()=>y}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(23194),p=r(76065),d=r(34631),b=r(95437),m=r(33823),f=(0,b.tool)({parameters:l.z.object({clickId:l.z.string()}),execute:async({clickId:e})=>{const t=CSS.escape(e),r=document.querySelector(`[data-click-id='${t}']`);return r instanceof HTMLElement?(r.click(),await new Promise((e=>setTimeout(e,2e3))),{}):"Element not found"}}),h=(0,b.tool)({parameters:l.z.object({editId:l.z.string(),value:l.z.string()}),execute:async({editId:e,value:t})=>{const r=CSS.escape(e),n=document.querySelector(`[data-edit-id='${r}']`);return n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement?(n.value=t,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})),await new Promise((e=>setTimeout(e,2e3))),{}):"Element not found"}}),g=(0,c.createContext)(!1),y=(e,t)=>{const r=(0,c.forwardRef)(((r,n)=>{const o=(0,c.useContext)(g),s=(0,c.useId)(),a=(0,c.useRef)(null),i=(0,p.useAssistantRuntime)();(0,c.useEffect)((()=>i.registerModelContextProvider({getModelContext:()=>({tools:{...t?.clickable?{click:f}:{},...t?.editable?{edit:h}:{}},system:o?void 0:a.current?.outerHTML})})),[t?.clickable,t?.editable,o,i]);const u=(0,d.useComposedRefs)(a,n);return(0,m.jsx)(g.Provider,{value:!0,children:(0,m.jsx)(e,{...r,...t?.clickable?{"data-click-id":s}:{},...t?.editable?{"data-edit-id":s}:{},ref:u})})}));return r.displayName=e.displayName,r},O=y},95437:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function i(e){return e}((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{tool:()=>i}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of o(t))s.call(e,a)||undefined===a||r(e,a,{get:()=>t[a],enumerable:!(i=n(t,a))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t))},1186:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useAssistantInstructions:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(76065),p=e=>{const{instruction:t,disabled:r=!1}=(e=>"string"==typeof e?{instruction:e}:e)(e),n=(0,l.useAssistantRuntime)();(0,c.useEffect)((()=>{if(r)return;const e={system:t};return n.registerModelContextProvider({getModelContext:()=>e})}),[n,t,r])}},6235:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useAssistantTool:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(41708),p=e=>{const t=(0,l.useAssistantRuntime)(),r=(0,l.useToolUIsStore)();(0,c.useEffect)((()=>e.render?r.getState().setToolUI(e.toolName,e.render):void 0),[r,e.toolName,e.render]),(0,c.useEffect)((()=>{const{toolName:r,render:n,disabled:o,...s}=e;if(o)return;const a={tools:{[r]:s}};return t.registerModelContextProvider({getModelContext:()=>a})}),[t,e])}},67513:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useAssistantToolUI:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(41708),p=e=>{const t=(0,l.useToolUIsStore)();(0,c.useEffect)((()=>{if(e)return t.getState().setToolUI(e.toolName,e.render)}),[t,e?.toolName,e?.render,!e])}},65926:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useInlineRender:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(10661),p=e=>{const[t]=(0,c.useState)((()=>(0,l.create)((()=>e))));return(0,c.useEffect)((()=>{t.setState(e)}),[e,t]),(0,c.useCallback)((function(e){return t()(e)}),[t])}},80729:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveCopy:()=>g}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(60415),p=r(37767),d=r(76065),b=r(7509),m=r(60546),f=r(76065),h=r(33823),g=(0,c.forwardRef)((({copiedDuration:e,onClick:t,disabled:r,...n},o)=>{const s=(0,d.useMessageUtils)((e=>e.isCopied)),a=(({copiedDuration:e=3e3}={})=>{const t=(0,m.useMessageRuntime)(),r=(0,f.useComposerRuntime)(),n=(0,d.useMessageUtils)((e=>e.setIsCopied)),o=(0,m.useMessage)((e=>("assistant"!==e.role||"running"!==e.status.type)&&e.content.some((e=>"text"===e.type&&e.text.length>0)))),s=(0,b.useCallback)((()=>{const{isEditing:o,text:s}=r.getState(),a=o?s:t.unstable_getCopyText();navigator.clipboard.writeText(a).then((()=>{n(!0),setTimeout((()=>n(!1)),e)}))}),[t,n,r,e]);return o?s:null})({copiedDuration:e});return(0,h.jsx)(p.Primitive.button,{type:"button",...s?{"data-copied":"true"}:{},...n,ref:o,disabled:r||!a,onClick:(0,l.composeEventHandlers)(t,(()=>{a?.()}))})}));g.displayName="ActionBarPrimitive.Copy"},10443:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveEdit:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(76065),d=(0,c.createActionButton)("ActionBarPrimitive.Edit",(()=>{const e=(0,p.useMessageRuntime)(),t=(0,p.useEditComposer)((e=>e.isEditing)),r=(0,l.useCallback)((()=>{e.composer.beginEdit()}),[e]);return t?null:r}))},86385:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveFeedbackNegative:()=>h}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(60415),p=r(76065),d=r(37767),b=r(7509),m=r(76065),f=r(33823),h=(0,c.forwardRef)((({onClick:e,disabled:t,...r},n)=>{const o=(0,p.useMessage)((e=>"negative"===e.submittedFeedback?.type)),s=(()=>{const e=(0,m.useMessageRuntime)();return(0,b.useCallback)((()=>{e.submitFeedback({type:"negative"})}),[e])})();return(0,f.jsx)(d.Primitive.button,{type:"button",...o?{"data-submitted":"true"}:{},...r,ref:n,disabled:t||!s,onClick:(0,l.composeEventHandlers)(e,(()=>{s?.()}))})}));h.displayName="ActionBarPrimitive.FeedbackNegative"},65670:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveFeedbackPositive:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(60415),p=r(76065),d=r(37767),b=r(33823),m=(0,c.forwardRef)((({onClick:e,disabled:t,...r},n)=>{const o=(0,p.useMessage)((e=>"positive"===e.submittedFeedback?.type)),s=(()=>{const e=(0,p.useMessageRuntime)();return(0,c.useCallback)((()=>{e.submitFeedback({type:"positive"})}),[e])})();return(0,b.jsx)(d.Primitive.button,{type:"button",...o?{"data-submitted":"true"}:{},...r,ref:n,disabled:t||!s,onClick:(0,l.composeEventHandlers)(e,(()=>{s?.()}))})}));m.displayName="ActionBarPrimitive.FeedbackPositive"},63214:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveReload:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(76065),d=r(64426),b=r(24967),m=(0,c.createActionButton)("ActionBarPrimitive.Reload",(()=>{const e=(0,p.useMessageRuntime)(),t=(0,d.useThreadRuntime)(),r=(0,b.useCombinedStore)([t,e],((e,t)=>e.isRunning||e.isDisabled||"assistant"!==t.role)),n=(0,l.useCallback)((()=>{e.reload()}),[e]);return r?null:n}))},21923:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveRoot:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(37767),l=r(7509),p=r(23686),d=r(33823),b=(0,l.forwardRef)((({hideWhenRunning:e,autohide:t,autohideFloat:r,...n},o)=>{const s=(0,p.useActionBarFloatStatus)({hideWhenRunning:e,autohide:t,autohideFloat:r});return s===p.HideAndFloatStatus.Hidden?null:(0,d.jsx)(c.Primitive.div,{...s===p.HideAndFloatStatus.Floating?{"data-floating":"true"}:null,...n,ref:o})}));b.displayName="ActionBarPrimitive.Root"},4678:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveSpeak:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(76065),p=(0,r(93187).createActionButton)("ActionBarPrimitive.Speak",(()=>{const e=(0,l.useMessageRuntime)(),t=(0,c.useCallback)((async()=>{e.speak()}),[e]);return(0,l.useMessage)((e=>("assistant"!==e.role||"running"!==e.status.type)&&e.content.some((e=>"text"===e.type&&e.text.length>0))))?t:null}))},53732:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ActionBarPrimitiveStopSpeaking:()=>h}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(35059),p=r(37767),d=r(60415),b=r(7509),m=r(60546),f=r(33823),h=(0,c.forwardRef)(((e,t)=>{const r=(()=>{const e=(0,m.useMessageRuntime)(),t=(0,m.useMessage)((e=>null!=e.speech)),r=(0,b.useCallback)((()=>{e.stopSpeaking()}),[e]);return t?r:null})();return(0,l.useEscapeKeydown)((e=>{r&&(e.preventDefault(),r())})),(0,f.jsx)(p.Primitive.button,{type:"button",disabled:!r,...e,ref:t,onClick:(0,d.composeEventHandlers)(e.onClick,(()=>{r?.()}))})}));h.displayName="ActionBarPrimitive.StopSpeaking"},93456:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{Copy:()=>l.ActionBarPrimitiveCopy,Edit:()=>d.ActionBarPrimitiveEdit,FeedbackNegative:()=>h.ActionBarPrimitiveFeedbackNegative,FeedbackPositive:()=>f.ActionBarPrimitiveFeedbackPositive,Reload:()=>p.ActionBarPrimitiveReload,Root:()=>c.ActionBarPrimitiveRoot,Speak:()=>b.ActionBarPrimitiveSpeak,StopSpeaking:()=>m.ActionBarPrimitiveStopSpeaking}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(21923),l=r(80729),p=r(63214),d=r(10443),b=r(4678),m=r(53732),f=r(65670),h=r(86385)},23686:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{HideAndFloatStatus:()=>d,useActionBarFloatStatus:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(60546),l=r(64426),p=r(24967),d=(e=>(e.Hidden="hidden",e.Floating="floating",e.Normal="normal",e))(d||{}),b=({hideWhenRunning:e,autohide:t,autohideFloat:r})=>{const n=(0,l.useThreadRuntime)(),o=(0,c.useMessageRuntime)(),s=(0,c.useMessageUtilsStore)();return(0,p.useCombinedStore)([n,o,s],((n,o,s)=>e&&n.isRunning?"hidden":"always"===t||"not-last"===t&&!o.isLast?s.isHovering?"always"===r||"single-branch"===r&&o.branchCount<=1?"floating":"normal":"hidden":"normal"))}},53465:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(p,{AssistantModalPrimitiveAnchor:()=>h}),e.exports=(n=p,l(s({},"__esModule",{value:!0}),n));var d=r(7509),b=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(31511)),m=r(77778),f=r(33823),h=(0,d.forwardRef)((({__scopeAssistantModal:e,...t},r)=>{const n=(0,m.usePopoverScope)(e);return(0,f.jsx)(b.Anchor,{...n,...t,ref:r})}));h.displayName="AssistantModalPrimitive.Anchor"},64298:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(p,{AssistantModalPrimitiveContent:()=>g}),e.exports=(n=p,l(s({},"__esModule",{value:!0}),n));var d=r(7509),b=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(31511)),m=r(77778),f=r(60415),h=r(33823),g=(0,d.forwardRef)((({__scopeAssistantModal:e,side:t,align:r,onInteractOutside:n,dissmissOnInteractOutside:o=!1,...s},a)=>{const i=(0,m.usePopoverScope)(e);return(0,h.jsx)(b.Portal,{...i,children:(0,h.jsx)(b.Content,{...i,...s,ref:a,side:t??"top",align:r??"end",onInteractOutside:(0,f.composeEventHandlers)(n,o?void 0:e=>e.preventDefault())})})}));g.displayName="AssistantModalPrimitive.Content"},30831:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(p,{AssistantModalPrimitiveRoot:()=>y}),e.exports=(n=p,l(s({},"__esModule",{value:!0}),n));var d=r(7509),b=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(31511)),m=r(60415),f=r(77778),h=r(76065),g=r(33823),y=({__scopeAssistantModal:e,defaultOpen:t,unstable_openOnRunStart:r,open:n,onOpenChange:o,...s})=>{const a=(0,f.usePopoverScope)(e),[i,u]=(({defaultOpen:e=!1,unstable_openOnRunStart:t=!0})=>{const r=(0,d.useState)(e),[,n]=r,o=(0,h.useThreadRuntime)();return(0,d.useEffect)((()=>{if(t)return o.unstable_on("run-start",(()=>{n(!0)}))}),[t,n,o,!t]),r})({defaultOpen:t,unstable_openOnRunStart:r});return(0,g.jsx)(b.Root,{...a,open:void 0===n?i:n,onOpenChange:(0,m.composeEventHandlers)(o,u),...s})};y.displayName="AssistantModalPrimitive.Root"},74222:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(p,{AssistantModalPrimitiveTrigger:()=>h}),e.exports=(n=p,l(s({},"__esModule",{value:!0}),n));var d=r(7509),b=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(31511)),m=r(77778),f=r(33823),h=(0,d.forwardRef)((({__scopeAssistantModal:e,...t},r)=>{const n=(0,m.usePopoverScope)(e);return(0,f.jsx)(b.Trigger,{...n,...t,ref:r})}));h.displayName="AssistantModalPrimitive.Trigger"},40049:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{Anchor:()=>d.AssistantModalPrimitiveAnchor,Content:()=>p.AssistantModalPrimitiveContent,Root:()=>c.AssistantModalPrimitiveRoot,Trigger:()=>l.AssistantModalPrimitiveTrigger}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(30831),l=r(74222),p=r(64298),d=r(53465)},77778:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(p,{usePopoverScope:()=>b}),e.exports=(n=p,l(s({},"__esModule",{value:!0}),n));var d=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(31511)),b=d.createPopoverScope()},30034:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AttachmentPrimitiveName:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(34563),l=r(33823),p=()=>{const e=(0,c.useAttachment)((e=>e.name));return(0,l.jsx)(l.Fragment,{children:e})};p.displayName="AttachmentPrimitive.Name"},73267:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AttachmentPrimitiveRemove:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(34563),d=(0,c.createActionButton)("AttachmentPrimitive.Remove",(()=>{const e=(0,p.useAttachmentRuntime)();return(0,l.useCallback)((()=>{e.remove()}),[e])}))},72351:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AttachmentPrimitiveRoot:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(37767),l=r(7509),p=r(33823),d=(0,l.forwardRef)(((e,t)=>(0,p.jsx)(c.Primitive.div,{...e,ref:t})));d.displayName="AttachmentPrimitive.Root"},9821:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AttachmentPrimitiveThumb:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(34563),p=r(37767),d=r(33823),b=(0,c.forwardRef)(((e,t)=>{const r=(0,l.useAttachment)((e=>e.name.split(".").pop()));return(0,d.jsxs)(p.Primitive.div,{...e,ref:t,children:[".",r]})}));b.displayName="AttachmentPrimitive.Thumb"},39098:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{Name:()=>p.AttachmentPrimitiveName,Remove:()=>d.AttachmentPrimitiveRemove,Root:()=>c.AttachmentPrimitiveRoot,unstable_Thumb:()=>l.AttachmentPrimitiveThumb}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(72351),l=r(9821),p=r(30034),d=r(73267)},15699:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{BranchPickerPrimitiveCount:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(60546),l=r(33823),p=()=>{const e=(0,c.useMessage)((e=>e.branchCount));return(0,l.jsx)(l.Fragment,{children:e})};p.displayName="BranchPickerPrimitive.Count"},19032:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{BranchPickerPrimitiveNext:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(60546),d=(0,c.createActionButton)("BranchPickerPrimitive.Next",(()=>{const e=(0,p.useMessageRuntime)(),t=(0,p.useMessage)((e=>e.branchNumber>=e.branchCount)),r=(0,l.useCallback)((()=>{e.switchToBranch({position:"next"})}),[e]);return t?null:r}))},64201:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{BranchPickerPrimitiveNumber:()=>p}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(60546),l=r(33823),p=()=>{const e=(0,c.useMessage)((e=>e.branchNumber));return(0,l.jsx)(l.Fragment,{children:e})};p.displayName="BranchPickerPrimitive.Number"},36964:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{BranchPickerPrimitivePrevious:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(60546),d=(0,c.createActionButton)("BranchPickerPrimitive.Previous",(()=>{const e=(0,p.useMessageRuntime)(),t=(0,p.useMessage)((e=>e.branchNumber<=1)),r=(0,l.useCallback)((()=>{e.switchToBranch({position:"previous"})}),[e]);return t?null:r}))},54801:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{BranchPickerPrimitiveRoot:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(37767),l=r(7509),p=r(97960),d=r(33823),b=(0,l.forwardRef)((({hideWhenSingleBranch:e,...t},r)=>(0,d.jsx)(p.If,{hasBranches:!!e||void 0,children:(0,d.jsx)(c.Primitive.div,{...t,ref:r})})));b.displayName="BranchPickerPrimitive.Root"},39861:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{Count:()=>p.BranchPickerPrimitiveCount,Next:()=>c.BranchPickerPrimitiveNext,Number:()=>d.BranchPickerPrimitiveNumber,Previous:()=>l.BranchPickerPrimitivePrevious,Root:()=>b.BranchPickerPrimitiveRoot}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(19032),l=r(36964),p=r(15699),d=r(64201),b=r(54801)},24219:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ComposerPrimitiveAddAttachment:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(76065),d=(0,c.createActionButton)("ComposerPrimitive.AddAttachment",(({multiple:e=!0}={})=>{const t=(0,p.useComposer)((e=>!e.isEditing)),r=(0,p.useComposerRuntime)(),n=(0,l.useCallback)((()=>{const t=document.createElement("input");t.type="file",t.multiple=e;const n=r.getAttachmentAccept();"*"!==n&&(t.accept=n),t.onchange=e=>{const t=e.target.files;if(t)for(const e of t)r.addAttachment(e)},t.click()}),[r,e]);return t?null:n}),["multiple"])},41388:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ComposerPrimitiveAttachments:()=>h}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(76065),p=r(34563),d=r(73915),b=r(33823),m=({components:e})=>{const t=(0,p.useThreadComposerAttachment)((t=>((e,t)=>{const r=t.type;switch(r){case"image":return e?.Image??e?.Attachment;case"document":return e?.Document??e?.Attachment;case"file":return e?.File??e?.Attachment;default:throw new Error(`Unknown attachment type: ${r}`)}})(e,t)));return t?(0,b.jsx)(t,{}):null},f=(0,c.memo)((({components:e,attachmentIndex:t})=>{const r=(0,l.useComposerRuntime)(),n=(0,c.useMemo)((()=>r.getAttachmentByIndex(t)),[r,t]);return(0,b.jsx)(d.AttachmentRuntimeProvider,{runtime:n,children:(0,b.jsx)(m,{components:e})})}),((e,t)=>e.attachmentIndex===t.attachmentIndex&&e.components?.Image===t.components?.Image&&e.components?.Document===t.components?.Document&&e.components?.File===t.components?.File&&e.components?.Attachment===t.components?.Attachment)),h=({components:e})=>{const t=(0,l.useComposer)((e=>e.attachments.length));return Array.from({length:t},((t,r)=>(0,b.jsx)(f,{attachmentIndex:r,components:e},r)))};h.displayName="ComposerPrimitive.Attachments"},9046:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ComposerPrimitiveCancel:()=>d}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(76065),d=(0,c.createActionButton)("ComposerPrimitive.Cancel",(()=>{const e=(0,p.useComposerRuntime)(),t=(0,p.useComposer)((e=>!e.canCancel)),r=(0,l.useCallback)((()=>{e.cancel()}),[e]);return t?null:r}))},90656:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ComposerPrimitiveIf:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(69567),l=({children:e,...t})=>{var r;return r=t,(0,c.useComposer)((e=>!(!0===r.editing&&!e.isEditing||!1===r.editing&&e.isEditing)))?e:null};l.displayName="ComposerPrimitive.If"},26668:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(p,{ComposerPrimitiveInput:()=>w}),e.exports=(n=p,l(s({},"__esModule",{value:!0}),n));var d=r(60415),b=r(34631),m=r(97269),f=r(7509),h=((e,t,r)=>(r=null!=e?o(u(e)):{},l(e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)))(r(55726)),g=r(69567),y=r(64426),O=r(35059),v=r(74801),P=r(15571),j=r(33823),w=(0,f.forwardRef)((({autoFocus:e=!1,asChild:t,disabled:r,onChange:n,onKeyDown:o,submitOnEnter:s=!0,cancelOnEscape:a=!0,unstable_focusOnRunStart:i=!0,unstable_focusOnScrollToBottom:u=!0,unstable_focusOnThreadSwitched:c=!0,...l},p)=>{const w=(0,P.useThreadListItemRuntime)(),_=(0,y.useThreadRuntime)(),S=(0,g.useComposerRuntime)(),C=(0,g.useComposer)((e=>e.isEditing?e.text:"")),x=t?m.Slot:h.default,M=(0,y.useThread)((e=>e.isDisabled))??r??!1,I=(0,f.useRef)(null),T=(0,b.useComposedRefs)(p,I);(0,O.useEscapeKeydown)((e=>{a&&S.getState().canCancel&&(S.cancel(),e.preventDefault())}));const A=e&&!M,R=(0,f.useCallback)((()=>{const e=I.current;e&&A&&(e.focus({preventScroll:!0}),e.setSelectionRange(e.value.length,e.value.length))}),[A]);return(0,f.useEffect)((()=>R()),[R]),(0,v.useOnScrollToBottom)((()=>{"thread"===S.type&&u&&R()})),(0,f.useEffect)((()=>{if("thread"===S.type&&i)return _.unstable_on("run-start",R)}),[i,R,S,_]),(0,f.useEffect)((()=>{if("thread"===S.type&&c)return w.unstable_on("switched-to",R)}),[c,R,S,w]),(0,j.jsx)(x,{name:"input",value:C,...l,ref:T,disabled:M,onChange:(0,d.composeEventHandlers)(n,(e=>{if(S.getState().isEditing)return S.setText(e.target.value)})),onKeyDown:(0,d.composeEventHandlers)(o,(e=>{if(!M&&s&&!e.nativeEvent.isComposing&&"Enter"===e.key&&!1===e.shiftKey){const{isRunning:t}=_.getState();t||(e.preventDefault(),I.current?.closest("form")?.requestSubmit())}}))})}));w.displayName="ComposerPrimitive.Input"},95134:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ComposerPrimitiveRoot:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(60415),l=r(37767),p=r(7509),d=r(60484),b=r(33823),m=(0,p.forwardRef)((({onSubmit:e,...t},r)=>{const n=(0,d.useComposerSend)();return(0,b.jsx)(l.Primitive.form,{...t,ref:r,onSubmit:(0,c.composeEventHandlers)(e,(e=>{e.preventDefault(),n&&n()}))})}));m.displayName="ComposerPrimitive.Root"},60484:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ComposerPrimitiveSend:()=>f,useComposerSend:()=>m}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(93187),l=r(7509),p=r(24967),d=r(64426),b=r(76065),m=()=>{const e=(0,b.useComposerRuntime)(),t=(0,d.useThreadRuntime)(),r=(0,p.useCombinedStore)([t,e],((e,t)=>e.isRunning||!t.isEditing||t.isEmpty)),n=(0,l.useCallback)((()=>{e.send()}),[e]);return r?null:n},f=(0,c.createActionButton)("ComposerPrimitive.Send",m)},18396:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{AddAttachment:()=>b.ComposerPrimitiveAddAttachment,Attachments:()=>m.ComposerPrimitiveAttachments,Cancel:()=>d.ComposerPrimitiveCancel,If:()=>f.ComposerPrimitiveIf,Input:()=>l.ComposerPrimitiveInput,Root:()=>c.ComposerPrimitiveRoot,Send:()=>p.ComposerPrimitiveSend}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(95134),l=r(26668),p=r(60484),d=r(9046),b=r(24219),m=r(41388),f=r(90656)},54843:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ContentPartPrimitiveImage:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(37767),l=r(7509),p=r(70659),d=r(33823),b=(0,l.forwardRef)(((e,t)=>{const{image:r}=(0,p.useContentPartImage)();return(0,d.jsx)(c.Primitive.img,{src:r,...e,ref:t})}));b.displayName="ContentPartPrimitive.Image"},4415:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ContentPartPrimitiveInProgress:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(76065),l=({children:e})=>(0,c.useContentPart)((e=>"running"===e.status.type))?e:null;l.displayName="ContentPartPrimitive.InProgress"},12431:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{ContentPartPrimitiveText:()=>b}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(7509),l=r(64859),p=r(31337),d=r(33823),b=(0,c.forwardRef)((({smooth:e=!0,component:t="span",...r},n)=>{const{text:o,status:s}=(0,p.useSmooth)((0,l.useContentPartText)(),e);return(0,d.jsx)(t,{"data-status":s.type,...r,ref:n,children:o})}));b.displayName="ContentPartPrimitive.Text"},70628:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{Image:()=>l.ContentPartPrimitiveImage,InProgress:()=>p.ContentPartPrimitiveInProgress,Text:()=>c.ContentPartPrimitiveText}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(12431),l=r(54843),p=r(4415)},46289:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useContentPartFile:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(34421),l=()=>(0,c.useContentPart)((e=>{if("file"!==e.type)throw new Error("ContentPartFile can only be used inside file content parts.");return e}))},70659:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useContentPartImage:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(34421),l=()=>(0,c.useContentPart)((e=>{if("image"!==e.type)throw new Error("ContentPartImage can only be used inside image content parts.");return e}))},64704:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useContentPartReasoning:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(34421),l=()=>(0,c.useContentPart)((e=>{if("reasoning"!==e.type)throw new Error("ContentPartReasoning can only be used inside reasoning content parts.");return e}))},81215:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useContentPartSource:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(34421),l=()=>(0,c.useContentPart)((e=>{if("source"!==e.type)throw new Error("ContentPartSource can only be used inside source content parts.");return e}))},64859:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{useContentPartText:()=>l}),e.exports=(n=u,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))i.call(e,r)||undefined===r||o(e,r,{get:()=>t[r],enumerable:!(n=s(t,r))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var c=r(34421),l=()=>(0,c.useContentPart)((e=>{if("text"!==e.type)throw new Error("ContentPartText can only be used inside text content parts.");return e}))},40798:(e,t,r)=>{var n,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of i(t))c.call(e,o)||o===r||s(e,o,{get:()=>t[o],enumerable:!(n=a(t,o))||n.enumerable});return e},p=(e,t,r)=>(r=null!=e?o(u(e)):{},l(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)),d={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(d,{ActionBarPrimitive:()=>b,AssistantModalPrimitive:()=>m,AttachmentPrimitive:()=>f,BranchPickerPrimitive:()=>h,ComposerPrimitive:()=>g,ContentPartPrimitive:()=>y,MessagePrimitive:()=>O,ThreadListItemPrimitive:()=>j,ThreadListPrimitive:()=>P,ThreadPrimitive:()=>v,useContentPartFile:()=>C.useContentPartFile,useContentPartImage:()=>x.useContentPartImage,useContentPartReasoning:()=>_.useContentPartReasoning,useContentPartSource:()=>S.useContentPartSource,useContentPartText:()=>w.useContentPartText,useThreadViewportAutoScroll:()=>M.useThreadViewportAutoScroll}),e.exports=(n=d,l(s({},"__esModule",{value:!0}),n));var b=p(r(93456)),m=p(r(40049)),f=p(r(39098)),h=p(r(39861)),g=p(r(18396)),y=p(r(70628)),O=p(r(97960)),v=p(r(6586)),P=p(r(72537)),j=p(r(20085)),w=r(64859),_=r(64704),S=r(81215),C=r(46289),x=r(70659),M=r(88313)}}]);